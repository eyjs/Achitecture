<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LLM 가이드 크롤링 기반 프로젝트 아키텍처</title>
    <style>
      body,
      h1,
      h2,
      h3,
      p,
      table {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans',
          'Helvetica Neue', sans-serif;
        color: #333;
      }
      body {
        background-color: #f9fafb;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
      }
      .header {
        background-color: #2c3e50;
        color: white;
        padding: 2.5rem;
        text-align: center;
        border-radius: 12px;
        margin-bottom: 2rem;
      }
      .header h1 {
        font-size: 2.5rem;
      }
      .section {
        background-color: #ffffff;
        margin-bottom: 2rem;
        padding: 2.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }
      .section h2 {
        font-size: 2rem;
        color: #2c3e50;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 3px solid #3498db;
      }
      .section h3 {
        font-size: 1.5rem;
        color: #34495e;
        margin-top: 2rem;
        margin-bottom: 1rem;
      }
      .diagram-container {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2rem;
        background-color: #f8f9fa;
        border-radius: 8px;
        margin-top: 1rem;
        overflow-x: auto;
      }
      .diagram-container svg {
        max-width: 100%;
        height: auto;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1.5rem;
      }
      th,
      td {
        padding: 1rem;
        text-align: left;
        border: 1px solid #e0e0e0;
      }
      th {
        background-color: #f2f2f2;
        font-weight: 600;
      }
      td ul,
      td ol {
        padding-left: 20px;
        margin: 0;
      }
      li {
        margin-bottom: 0.5rem;
      }
      .process-description {
        margin-top: 1.5rem;
      }
      .enhancement-box {
        background: linear-gradient(135deg, #dbeafe 0%, #3b82f6 100%);
        color: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin: 1.5rem 0;
        font-weight: 600;
      }
      .enhancement-box h4 {
        margin: 0 0 1rem 0;
        font-size: 1.2rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1 style="color: white">프로젝트 기술 아키텍처 및 역할</h1>
        <p style="color: white">LLM 가이드 크롤링 기반</p>
      </div>

      <div class="enhancement-box">
        <h4>핵심 특징</h4>
        <p>
          <strong>LLM 가이드 스파이더링:</strong> LLM이 탐색 목적에 맞는 최적 경로를 안내하여, 데이터 수집의 효율성과
          정확성을 확보합니다.
        </p>
      </div>

      <section id="big-picture">
        <h2>0. 프로젝트의 큰 그림 (The Big Picture)</h2>
        <p>
          <strong>목표:</strong> 인터넷상의 방대한 비정형 데이터를 AI를 통해 신뢰도 높은 '구조화된 지식'으로 자동
          변환하여, 데이터 기반의 의사결정을 지원하는 지능형 플랫폼을 구축합니다.
        </p>
        <div class="diagram-container">
          <svg width="800" height="150" viewBox="0 0 800 150" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker
                id="arrow"
                viewBox="0 0 10 10"
                refX="5"
                refY="5"
                markerWidth="6"
                markerHeight="6"
                orient="auto-start-reverse"
              >
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#555" />
              </marker>
            </defs>
            <!-- Nodes -->
            <g>
              <rect x="10" y="30" width="150" height="90" rx="8" fill="#e3f2fd" stroke="#333" stroke-width="1" />
              <text x="85" y="65" text-anchor="middle" font-size="20px" fill="#333">🌐</text>
              <text x="85" y="90" text-anchor="middle" font-size="14px" font-weight="bold" fill="#333">인터넷</text>
              <text x="85" y="110" text-anchor="middle" font-size="12px" fill="#555">(비정형 데이터)</text>
            </g>
            <g>
              <rect x="220" y="30" width="150" height="90" rx="8" fill="#e8f5e9" stroke="#333" stroke-width="1" />
              <text x="295" y="65" text-anchor="middle" font-size="20px" fill="#333">🧠</text>
              <text x="295" y="90" text-anchor="middle" font-size="14px" font-weight="bold" fill="#333">
                지능형 데이터 파이프라인
              </text>
              <text x="295" y="110" text-anchor="middle" font-size="12px" fill="#555">
                (LLM 가이드 수집, 정제, 벡터화)
              </text>
            </g>
            <g>
              <rect x="430" y="30" width="150" height="90" rx="8" fill="#fffde7" stroke="#333" stroke-width="1" />
              <text x="505" y="65" text-anchor="middle" font-size="20px" fill="#333">📚</text>
              <text x="505" y="90" text-anchor="middle" font-size="14px" font-weight="bold" fill="#333">
                구조화된 지식
              </text>
              <text x="505" y="110" text-anchor="middle" font-size="12px" fill="#555">(Vector DB, Meta DB)</text>
            </g>
            <g>
              <rect x="640" y="30" width="150" height="90" rx="8" fill="#f3e5f5" stroke="#333" stroke-width="1" />
              <text x="715" y="65" text-anchor="middle" font-size="20px" fill="#333">💡</text>
              <text x="715" y="90" text-anchor="middle" font-size="14px" font-weight="bold" fill="#333">
                최종 서비스
              </text>
              <text x="715" y="110" text-anchor="middle" font-size="12px" fill="#555">(검색, 분석, Q&A)</text>
            </g>
            <!-- Arrows -->
            <line x1="165" y1="75" x2="215" y2="75" stroke="#555" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="375" y1="75" x2="425" y2="75" stroke="#555" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="585" y1="75" x2="635" y2="75" stroke="#555" stroke-width="2" marker-end="url(#arrow)" />
          </svg>
        </div>
      </section>

      <section id="architecture">
        <h2>1. 전체 시스템 아키텍처</h2>
        <p>
          <strong>핵심:</strong> 각 서비스는 독립적으로 작동하며, 메시지 큐를 통해 비동기적으로 연결됩니다. LLM 가이드
          크롤링을 통해 데이터 수집 효율성과 품질을 확보합니다.
        </p>
        <div class="diagram-container">
          <svg width="450" height="520" viewBox="0 0 450 520" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker
                id="arrow-blue"
                viewBox="0 0 10 10"
                refX="8"
                refY="5"
                markerWidth="6"
                markerHeight="6"
                orient="auto-start-reverse"
              >
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#3498db" />
              </marker>
            </defs>
            <!-- Components -->
            <g>
              <rect x="70" y="20" width="310" height="100" rx="10" stroke="#f59e0b" stroke-width="2" fill="#fef3c7" />
              <text x="225" y="45" text-anchor="middle" font-weight="bold">LLM 가이드 Python 크롤러 클러스터</text>
              <rect x="100" y="60" width="100" height="40" rx="5" fill="#fffde7" stroke="#333" />
              <text x="150" y="85" text-anchor="middle" font-size="12px">스마트 크롤러 1</text>
              <rect x="250" y="60" width="100" height="40" rx="5" fill="#fffde7" stroke="#333" />
              <text x="300" y="85" text-anchor="middle" font-size="12px">스마트 크롤러 N</text>
            </g>
            <g>
              <rect x="70" y="150" width="310" height="60" rx="10" stroke="#ccc" stroke-width="1" fill="#f8f9fa" />
              <text x="225" y="175" text-anchor="middle" font-weight="bold">데이터 파이프라인</text>
              <rect x="110" y="185" width="230" height="20" rx="5" fill="#fce4ec" stroke="#333" />
              <text x="225" y="199" text-anchor="middle" font-size="12px">Message Queue (정제된 다중 파일 형식)</text>
            </g>
            <g>
              <rect x="70" y="240" width="310" height="100" rx="10" stroke="#ccc" stroke-width="1" fill="#f8f9fa" />
              <text x="225" y="265" text-anchor="middle" font-weight="bold">.NET 백엔드 (기존 유지)</text>
              <rect x="100" y="280" width="100" height="40" rx="5" fill="#e8f5e9" stroke="#333" />
              <text x="150" y="305" text-anchor="middle" font-size="12px">Worker 1</text>
              <rect x="250" y="280" width="100" height="40" rx="5" fill="#e8f5e9" stroke="#333" />
              <text x="300" y="305" text-anchor="middle" font-size="12px">Worker N</text>
            </g>
            <g>
              <rect x="70" y="370" width="310" height="140" rx="10" stroke="#ccc" stroke-width="1" fill="#f8f9fa" />
              <text x="225" y="395" text-anchor="middle" font-weight="bold">인프라 (기존 유지)</text>
              <rect x="110" y="410" width="230" height="90" rx="5" fill="#e0f7fa" stroke="#333" />
              <text x="225" y="435" text-anchor="middle" font-size="12px">AI Gateway</text>
              <text x="225" y="460" text-anchor="middle" font-size="12px">Vector DB</text>
              <text x="225" y="485" text-anchor="middle" font-size="12px">Meta DB</text>
            </g>

            <!-- Arrows -->
            <path d="M 225 120 V 150" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrow-blue)" />
            <text x="240" y="140" font-size="12px" fill="#3498db">1. 정제된 다중 파일 전송</text>
            <path d="M 225 210 V 240" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrow-blue)" />
            <text x="240" y="230" font-size="12px" fill="#3498db">2. 데이터 전달</text>
            <path d="M 225 340 V 370" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrow-blue)" />
            <text x="240" y="360" font-size="12px" fill="#3498db">3. 데이터 처리/저장</text>
          </svg>
        </div>
      </section>

      <section id="process">
        <h2>2. 각 영역별 프로세스 도식화</h2>

        <h3>2.1. LLM 가이드 스마트 크롤링</h3>
        <p>
          <strong>역할:</strong> LLM이 각 단계에서 목적지까지의 최적 경로를 안내하여, 관련성 높은 페이지만 선별적으로
          탐색하며 HTML/PDF/Word 등 다중 파일 형식을 지능적으로 수집합니다.
        </p>
        <div class="diagram-container">
          <svg width="900" height="500" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker
                id="arrow-smart"
                viewBox="0 0 10 10"
                refX="8"
                refY="5"
                markerWidth="6"
                markerHeight="6"
                orient="auto-start-reverse"
              >
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#7c3aed" />
              </marker>
              <marker
                id="arrow-green"
                viewBox="0 0 10 10"
                refX="8"
                refY="5"
                markerWidth="6"
                markerHeight="6"
                orient="auto-start-reverse"
              >
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#16a34a" />
              </marker>
            </defs>

            <!-- Site Configuration -->
            <rect x="20" y="50" width="140" height="100" rx="10" fill="#dbeafe" stroke="#333" />
            <text x="90" y="80" text-anchor="middle" font-weight="bold">사이트 설정</text>
            <text x="90" y="100" text-anchor="middle" font-size="11">40개 금융사이트</text>
            <text x="90" y="120" text-anchor="middle" font-size="11">+ 타겟 주제</text>
            <text x="90" y="135" text-anchor="middle" font-size="10">예: "연금정책변화"</text>

            <!-- LLM Decision Engine -->
            <rect x="200" y="50" width="160" height="150" rx="10" fill="#fef3c7" stroke="#f59e0b" />
            <text x="280" y="80" text-anchor="middle" font-weight="bold">LLM 의사결정 엔진</text>
            <text x="280" y="105" text-anchor="middle" font-size="11">"정책자료실" vs</text>
            <text x="280" y="120" text-anchor="middle" font-size="11">"보도자료" vs</text>
            <text x="280" y="135" text-anchor="middle" font-size="11">"공지사항" 중</text>
            <text x="280" y="150" text-anchor="middle" font-size="11">어디로 갈지 결정</text>
            <text x="280" y="175" text-anchor="middle" font-size="10">목적지 도달 여부 판단</text>

            <!-- Smart Spider -->
            <rect x="400" y="50" width="200" height="150" rx="10" fill="#ede9fe" stroke="#8b5cf6" />
            <text x="500" y="80" text-anchor="middle" font-weight="bold">지능형 스파이더</text>
            <text x="500" y="105" text-anchor="middle" font-size="11">3-5단계 깊이로 제한</text>
            <text x="500" y="125" text-anchor="middle" font-size="11">방문 URL 추적</text>
            <text x="500" y="145" text-anchor="middle" font-size="11">무한 루프 방지</text>
            <text x="500" y="165" text-anchor="middle" font-size="11">목적지 도달 시 수집</text>

            <!-- Multi-file Extractor -->
            <rect x="640" y="50" width="200" height="150" rx="10" fill="#dcfce7" stroke="#16a34a" />
            <text x="740" y="80" text-anchor="middle" font-weight="bold">다중 파일 추출기</text>
            <text x="740" y="105" text-anchor="middle" font-size="11">HTML, PDF, DOCX,</text>
            <text x="740" y="120" text-anchor="middle" font-size="11">XLSX, PPTX, HWP</text>
            <text x="740" y="140" text-anchor="middle" font-size="11">자동 형식 인식</text>
            <text x="740" y="160" text-anchor="middle" font-size="11">노이즈 제거</text>
            <text x="740" y="180" text-anchor="middle" font-size="11">품질 검증</text>

            <!-- Process Flow -->
            <rect
              x="200"
              y="250"
              width="500"
              height="200"
              rx="15"
              fill="#f1f5f9"
              stroke="#64748b"
              stroke-dasharray="5,5"
            />
            <text x="450" y="280" text-anchor="middle" font-weight="bold" font-size="16">처리 플로우</text>

            <!-- Flow Steps -->
            <rect x="220" y="300" width="100" height="40" rx="5" fill="#bfdbfe" stroke="#3b82f6" />
            <text x="270" y="325" text-anchor="middle" font-size="10">1. 메인페이지</text>

            <rect x="340" y="300" width="100" height="40" rx="5" fill="#fde68a" stroke="#f59e0b" />
            <text x="390" y="325" text-anchor="middle" font-size="10">2. LLM 경로선택</text>

            <rect x="460" y="300" width="100" height="40" rx="5" fill="#c7d2fe" stroke="#6366f1" />
            <text x="510" y="325" text-anchor="middle" font-size="10">3. 목적지 탐색</text>

            <rect x="580" y="300" width="100" height="40" rx="5" fill="#bbf7d0" stroke="#10b981" />
            <text x="630" y="325" text-anchor="middle" font-size="10">4. 파일 수집</text>

            <rect x="300" y="370" width="200" height="60" rx="10" fill="#fce4ec" stroke="#e91e63" />
            <text x="400" y="395" text-anchor="middle" font-weight="bold">메시지 큐 전송</text>
            <text x="400" y="415" text-anchor="middle" font-size="11">정제된 고품질 데이터</text>

            <!-- Arrows -->
            <path d="M 160 100 H 200" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow-smart)" />
            <path d="M 360 125 H 400" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-smart)" />
            <path d="M 600 125 H 640" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrow-smart)" />

            <path d="M 320 320 H 340" stroke="#7c3aed" stroke-width="2" marker-end="url(#arrow-smart)" />
            <path d="M 440 320 H 460" stroke="#7c3aed" stroke-width="2" marker-end="url(#arrow-smart)" />
            <path d="M 560 320 H 580" stroke="#7c3aed" stroke-width="2" marker-end="url(#arrow-smart)" />

            <path
              d="M 570 340 C 570 355, 450 355, 450 370"
              stroke="#16a34a"
              stroke-width="2"
              marker-end="url(#arrow-green)"
            />

            <!-- Labels -->
            <text x="180" y="90" font-size="10" fill="#3b82f6">설정 로드</text>
            <text x="380" y="115" font-size="10" fill="#f59e0b">경로 분석</text>
            <text x="620" y="115" font-size="10" fill="#8b5cf6">파일 추출</text>
            <text x="500" y="350" font-size="10" fill="#16a34a">품질 데이터</text>
          </svg>
        </div>
        <div class="process-description">
          <ol>
            <li>
              <strong>사이트 설정 로드:</strong> 40개 금융사이트 URL과 각 사이트별 타겟 주제(예: "연금정책변화",
              "금리정책발표") 정보를 로드합니다.
            </li>
            <li>
              <strong>LLM 경로 결정:</strong> 메인 페이지에서 링크를 추출하고, LLM이 타겟 주제와 관련성이 높은 링크를
              선택합니다.
            </li>
            <li>
              <strong>지능형 탐색:</strong> 선택된 경로로 이동하며, 각 단계에서 LLM이 "목적지 도달" 또는 "더 깊이 탐색"
              여부를 결정합니다.
            </li>
            <li>
              <strong>다중 파일 수집:</strong> 목적지 페이지에서 HTML뿐만 아니라 PDF, Word, Excel 등 모든 관련 파일을
              수집합니다.
            </li>
            <li>
              <strong>노이즈 제거 및 정제:</strong> 광고, 메뉴, 푸터 등 불필요한 요소를 제거하고 핵심 콘텐츠만
              추출합니다.
            </li>
            <li>
              <strong>품질 검증:</strong> 수집된 데이터의 관련성, 완성도, 신뢰도를 평가하여 품질 점수를 부여합니다.
            </li>
            <li><strong>메시지 큐 전송:</strong> 정제된 고품질 데이터를 메타정보와 함께 메시지 큐로 전송합니다.</li>
          </ol>
        </div>

        <h3>2.2. 데이터 파이프라인 심층 분석 (메시지 큐)</h3>
        <p>
          <strong>역할:</strong> 크롤러(Publisher)와 백엔드(Consumer) 사이의 통신을 중개하여, 시스템의 안정성과 확장성을
          보장하는 핵심 요소입니다. (기존과 동일)
        </p>
        <div class="diagram-container">
          <svg width="900" height="400" viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker
                id="arrow-mq"
                viewBox="0 0 10 10"
                refX="8"
                refY="5"
                markerWidth="6"
                markerHeight="6"
                orient="auto-start-reverse"
              >
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#c0392b" />
              </marker>
              <marker
                id="arrow-dlq"
                viewBox="0 0 10 10"
                refX="8"
                refY="5"
                markerWidth="6"
                markerHeight="6"
                orient="auto-start-reverse"
              >
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#7f8c8d" />
              </marker>
            </defs>

            <rect x="20" y="150" width="140" height="80" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" />
            <text x="90" y="180" text-anchor="middle" font-weight="bold">LLM 가이드</text>
            <text x="90" y="200" text-anchor="middle" font-weight="bold">크롤러 (Publisher)</text>

            <rect x="220" y="160" width="120" height="60" rx="10" fill="#f3e5f5" stroke="#333" />
            <text x="280" y="190" text-anchor="middle" font-weight="bold">Exchange</text>

            <rect x="440" y="80" width="120" height="60" rx="10" fill="#e8f5e9" stroke="#333" />
            <text x="500" y="110" text-anchor="middle" font-weight="bold">Main Queue</text>

            <rect x="440" y="240" width="120" height="60" rx="10" fill="#f1f2f6" stroke="#333" />
            <text x="500" y="260" text-anchor="middle" font-weight="bold">Dead Letter</text>
            <text x="500" y="280" text-anchor="middle" font-weight="bold">Queue (DLQ)</text>

            <rect x="680" y="80" width="120" height="80" rx="10" fill="#e0f7fa" stroke="#333" />
            <text x="740" y="110" text-anchor="middle" font-weight="bold">.NET</text>
            <text x="740" y="130" text-anchor="middle" font-size="12px">백엔드 (Consumer)</text>

            <rect x="680" y="240" width="120" height="60" rx="10" fill="#f1f2f6" stroke="#333" />
            <text x="740" y="270" text-anchor="middle" font-weight="bold">모니터링</text>
            <text x="740" y="285" text-anchor="middle" font-size="12px">(실패 분석)</text>

            <!-- Arrows -->
            <path d="M 160 190 H 220" stroke="#c0392b" stroke-width="2" fill="none" marker-end="url(#arrow-mq)" />
            <text x="165" y="180" font-size="12px">1. 정제된 데이터 발행</text>

            <path
              d="M 340 190 C 380 190, 380 110, 440 110"
              stroke="#c0392b"
              stroke-width="2"
              fill="none"
              marker-end="url(#arrow-mq)"
            />
            <text x="350" y="155" font-size="12px">2. 라우팅</text>

            <path d="M 560 110 H 680" stroke="#c0392b" stroke-width="2" fill="none" marker-end="url(#arrow-mq)" />
            <text x="570" y="100" font-size="12px">3. 메시지 소비</text>

            <path
              d="M 740 160 C 740 220, 560 220, 560 110"
              stroke="#27ae60"
              stroke-width="2"
              stroke-dasharray="5,5"
              fill="none"
              marker-end="url(#arrow-mq)"
            />
            <text x="580" y="180" font-size="12px" fill="#27ae60">4a. 처리 성공 (ACK)</text>

            <path
              d="M 740 160 C 740 230, 580 230, 560 270"
              stroke="#e74c3c"
              stroke-width="2"
              stroke-dasharray="5,5"
              fill="none"
              marker-end="url(#arrow-mq)"
            />
            <text x="580" y="225" font-size="12px" fill="#e74c3c">4b. 처리 실패 (NACK)</text>
            <text x="580" y="245" font-size="12px" fill="#e74c3c">5. DLQ로 이동</text>

            <path d="M 560 270 H 680" stroke="#7f8c8d" stroke-width="2" fill="none" marker-end="url(#arrow-dlq)" />
          </svg>
        </div>

        <h3>2.3. .NET 백엔드 (데이터 처리 영역)</h3>
        <p>
          <strong>역할:</strong> 메시지 큐로부터 받은 데이터를 가공, 벡터화하여 최종 데이터베이스에 저장합니다. (기존과
          동일)
        </p>
        <div class="diagram-container">
          <svg width="300" height="550" viewBox="0 0 300 550" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker
                id="arrow-purple"
                viewBox="0 0 10 10"
                refX="8"
                refY="5"
                markerWidth="6"
                markerHeight="6"
                orient="auto-start-reverse"
              >
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#8e44ad" />
              </marker>
            </defs>
            <rect x="50" y="10" width="200" height="50" rx="5" fill="#fce4ec" stroke="#333" />
            <text x="150" y="30" text-anchor="middle">메시지 큐에서</text>
            <text x="150" y="48" text-anchor="middle">정제된 데이터 수신</text>
            <path d="M 150 60 V 80" stroke="#8e44ad" stroke-width="2" marker-end="url(#arrow-purple)" />

            <rect x="50" y="80" width="200" height="50" rx="5" fill="#e8f5e9" stroke="#333" />
            <text x="150" y="100" text-anchor="middle">추가 전처리</text>
            <text x="150" y="118" text-anchor="middle">(필요시)</text>
            <path d="M 150 130 V 150" stroke="#8e44ad" stroke-width="2" marker-end="url(#arrow-purple)" />

            <rect x="50" y="150" width="200" height="50" rx="5" fill="#ede7f6" stroke="#333" />
            <text x="150" y="170" text-anchor="middle">LLM 호출</text>
            <text x="150" y="188" text-anchor="middle">(프롬프트 + 정제 텍스트)</text>
            <path d="M 150 200 V 220" stroke="#8e44ad" stroke-width="2" marker-end="url(#arrow-purple)" />

            <rect x="50" y="220" width="200" height="50" rx="5" fill="#e8f5e9" stroke="#333" />
            <text x="150" y="240" text-anchor="middle">구조화된</text>
            <text x="150" y="258" text-anchor="middle">JSON 데이터 수신</text>

            <path d="M 150 270 V 290" stroke="#8e44ad" stroke-width="2" marker-end="url(#arrow-purple)" />
            <rect x="50" y="290" width="200" height="50" rx="5" fill="#ede7f6" stroke="#333" />
            <text x="150" y="310" text-anchor="middle">임베딩 모델 호출</text>
            <text x="150" y="328" text-anchor="middle">(JSON 내 텍스트)</text>

            <path d="M 150 340 V 360" stroke="#8e44ad" stroke-width="2" marker-end="url(#arrow-purple)" />
            <rect x="50" y="360" width="200" height="40" rx="5" fill="#e8f5e9" stroke="#333" />
            <text x="150" y="385" text-anchor="middle">벡터(Embedding) 수신</text>

            <path d="M 150 400 V 420" stroke="#8e44ad" stroke-width="2" marker-end="url(#arrow-purple)" />
            <rect x="50" y="420" width="200" height="50" rx="5" fill="#e0f7fa" stroke="#333" />
            <text x="150" y="440" text-anchor="middle">Vector DB에</text>
            <text x="150" y="458" text-anchor="middle">벡터 저장</text>

            <path
              d="M 100 270 H 25 V 490 H 50"
              stroke="#8e44ad"
              stroke-width="2"
              fill="none"
              marker-end="url(#arrow-purple)"
            />
            <text x="35" y="380" font-size="12px" text-anchor="middle">메타데이터</text>
            <rect x="50" y="490" width="200" height="50" rx="5" fill="#e0f7fa" stroke="#333" />
            <text x="150" y="510" text-anchor="middle">RDB에 JSON 및</text>
            <text x="150" y="528" text-anchor="middle">기타 정보 저장</text>
          </svg>
        </div>
      </section>

      <section id="enhanced-benefits">
        <h2>3. LLM 가이드 크롤링 도입 효과</h2>
        <table>
          <thead>
            <tr>
              <th>측정 항목</th>
              <th>기존 방식</th>
              <th>LLM 가이드 방식</th>
              <th>주요 성과</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>탐색 효율성</strong></td>
              <td>평균 50-200 페이지 방문</td>
              <td>평균 3-8 페이지 방문</td>
              <td><strong>90% 감소</strong></td>
            </tr>
            <tr>
              <td><strong>목적지 도달률</strong></td>
              <td>60-70% (노이즈 많음)</td>
              <td>85-95% (정확한 타겟팅)</td>
              <td><strong>25%p 향상</strong></td>
            </tr>
            <tr>
              <td><strong>크롤링 시간</strong></td>
              <td>사이트당 30-60분</td>
              <td>사이트당 5-15분</td>
              <td><strong>80% 단축</strong></td>
            </tr>
            <tr>
              <td><strong>파일 형식 지원</strong></td>
              <td>HTML</td>
              <td>HTML/PDF/Word/Excel/PPT</td>
              <td><strong>다중 형식 지원</strong></td>
            </tr>
            <tr>
              <td><strong>데이터 품질</strong></td>
              <td>관련성 낮은 데이터 혼재</td>
              <td>목적 중심 고품질 데이터</td>
              <td><strong>품질 향상</strong></td>
            </tr>
          </tbody>
        </table>
      </section>

      <section id="azure-architecture">
        <h2>4. Microsoft Azure 기반 인프라 아키텍처</h2>
        <p>Public Cloud 환경인 Microsoft Azure를 활용하여 전체 시스템을 구축할 경우의 아키텍처입니다. (기존과 동일)</p>
        <div class="diagram-container">
          <svg width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker
                id="arrow-azure"
                viewBox="0 0 10 10"
                refX="8"
                refY="5"
                markerWidth="6"
                markerHeight="6"
                orient="auto-start-reverse"
              >
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#0078D4" />
              </marker>
            </defs>
            <rect
              x="10"
              y="10"
              width="780"
              height="480"
              rx="15"
              stroke="#0078D4"
              stroke-width="2"
              fill="none"
              stroke-dasharray="10,5"
            />
            <text x="400" y="40" text-anchor="middle" font-weight="bold" font-size="18px" fill="#0078D4">
              Microsoft Azure Cloud
            </text>

            <!-- Components -->
            <g>
              <rect x="40" y="70" width="180" height="80" rx="10" fill="#fff" stroke="#f59e0b" stroke-width="2" />
              <text x="130" y="95" text-anchor="middle" font-weight="bold">LLM 가이드 크롤러</text>
              <text x="130" y="125" text-anchor="middle" font-size="12px" fill="#0078D4">Azure Container Apps</text>
            </g>
            <g>
              <rect x="310" y="70" width="180" height="80" rx="10" fill="#fff" stroke="#ccc" />
              <text x="400" y="95" text-anchor="middle" font-weight="bold">메시지 큐</text>
              <text x="400" y="125" text-anchor="middle" font-size="12px" fill="#0078D4">Azure Service Bus</text>
            </g>
            <g>
              <rect x="580" y="70" width="180" height="80" rx="10" fill="#fff" stroke="#ccc" />
              <text x="670" y="95" text-anchor="middle" font-weight="bold">.NET 백엔드</text>
              <text x="670" y="125" text-anchor="middle" font-size="12px" fill="#0078D4">Azure Container Apps</text>
            </g>

            <!-- Storage & AI -->
            <g>
              <rect x="40" y="180" width="340" height="150" rx="10" fill="#f0f6ff" stroke="#ccc" />
              <text x="210" y="205" text-anchor="middle" font-weight="bold">데이터 저장소 (Storage)</text>
              <rect x="60" y="220" width="140" height="90" rx="5" fill="#fff" stroke="#ccc" />
              <text x="130" y="245" text-anchor="middle" font-size="12px" font-weight="bold">Vector DB</text>
              <text x="130" y="270" text-anchor="middle" font-size="12px" fill="#0078D4">Azure AI Search</text>
              <rect x="220" y="220" width="140" height="90" rx="5" fill="#fff" stroke="#ccc" />
              <text x="290" y="245" text-anchor="middle" font-size="12px" font-weight="bold">Relational DB</text>
              <text x="290" y="270" text-anchor="middle" font-size="12px" fill="#0078D4">Azure SQL DB</text>
            </g>
            <g>
              <rect x="420" y="180" width="340" height="150" rx="10" fill="#f0f6ff" stroke="#ccc" />
              <text x="590" y="205" text-anchor="middle" font-weight="bold">AI 서비스</text>
              <rect x="440" y="220" width="300" height="90" rx="5" fill="#fff" stroke="#ccc" />
              <text x="590" y="245" text-anchor="middle" font-size="12px" font-weight="bold">LLM / Embedding</text>
              <text x="590" y="270" text-anchor="middle" font-size="12px" fill="#0078D4">Azure OpenAI Service</text>
            </g>

            <!-- Common Infra -->
            <g>
              <rect x="40" y="350" width="720" height="110" rx="10" fill="#f0f6ff" stroke="#ccc" />
              <text x="400" y="375" text-anchor="middle" font-weight="bold">공통 인프라</text>
              <rect x="60" y="390" width="160" height="50" rx="5" fill="#fff" stroke="#ccc" />
              <text x="140" y="415" text-anchor="middle" font-size="12px">Azure Blob Storage</text>
              <rect x="240" y="390" width="160" height="50" rx="5" fill="#fff" stroke="#ccc" />
              <text x="320" y="415" text-anchor="middle" font-size="12px">Azure Container Registry</text>
              <rect x="420" y="390" width="160" height="50" rx="5" fill="#fff" stroke="#ccc" />
              <text x="500" y="415" text-anchor="middle" font-size="12px">Azure DevOps / Actions</text>
              <rect x="600" y="390" width="140" height="50" rx="5" fill="#fff" stroke="#ccc" />
              <text x="670" y="415" text-anchor="middle" font-size="12px">Azure Monitor</text>
            </g>

            <!-- Arrows -->
            <path d="M 220 110 H 310" stroke="#0078D4" stroke-width="2" fill="none" marker-end="url(#arrow-azure)" />
            <path d="M 490 110 H 580" stroke="#0078D4" stroke-width="2" fill="none" marker-end="url(#arrow-azure)" />
            <path d="M 670 150 V 180" stroke="#0078D4" stroke-width="2" fill="none" marker-end="url(#arrow-azure)" />
            <path d="M 670 330 V 350" stroke="#0078D4" stroke-width="2" fill="none" marker-end="url(#arrow-azure)" />
          </svg>
        </div>
      </section>

      <section id="issues">
        <h2>5. 영역별 핵심 이슈사항 및 고려사항</h2>
        <table>
          <thead>
            <tr>
              <th>영역</th>
              <th>핵심 이슈사항</th>
              <th>담당자 고려사항</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>LLM 가이드 크롤러</strong></td>
              <td>
                <ul>
                  <li>LLM API 호출 비용 관리</li>
                  <li>경로 결정 정확도</li>
                  <li>무한 루프 방지</li>
                  <li>다중 파일 형식 처리</li>
                  <li>목적지 도달 판단 로직</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>배치 처리로 API 비용 최적화</li>
                  <li>프롬프트 엔지니어링을 통한 정확도 향상</li>
                  <li>방문 URL 추적 및 깊이 제한(3-5단계)</li>
                  <li>PyPDF2, python-docx 등 전용 라이브러리 활용</li>
                  <li>컨텍스트 기반 목적지 판단 알고리즘</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><strong>데이터 파이프라인</strong></td>
              <td>
                <ul>
                  <li>메시지 유실 방지 (Durability)</li>
                  <li>처리 실패 메시지 관리 (Dead Letter Queue)</li>
                  <li>메시지 포맷 표준화</li>
                  <li>다중 파일 형식 메타데이터 관리</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>메시지 큐 설정에서 'Durable' 옵션 활성화</li>
                  <li>실패한 메시지를 별도 큐로 보내 재처리 또는 분석 로직 구현</li>
                  <li>크롤러와 백엔드 간 데이터 스키마(Schema) 정의 및 공유</li>
                  <li>파일 형식별 메타데이터 스키마 정의</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><strong>.NET 백엔드</strong></td>
              <td>
                <ul>
                  <li>LLM API 비용 및 속도 제한(Rate Limit)</li>
                  <li>프롬프트 엔지니어링 (추출 정확도)</li>
                  <li>데이터 유효성 검증</li>
                  <li>대규모 데이터 저장 및 조회 성능</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>API 호출 비용 모니터링 및 예산 관리 시스템 구축</li>
                  <li>다양한 프롬프트 테스트를 통한 최적의 결과 도출 및 버전 관리</li>
                  <li>LLM이 반환한 JSON 데이터의 형식과 값을 검증하는 로직 구현</li>
                  <li>Vector DB 인덱싱 전략 및 RDB 쿼리 최적화</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section id="timeline">
        <h2>6. 영역별 예상 개발 소요 시간</h2>
        <p><strong>기준:</strong> 신규 기술 도입에 따른 학습 곡선을 고려한 일정입니다. (중급 개발자 1인 기준)</p>
        <table>
          <thead>
            <tr>
              <th>영역 (Area)</th>
              <th>주요 업무 (Key Tasks)</th>
              <th>예상 소요 시간 (Estimated Time)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>LLM 가이드 크롤러 코어</strong></td>
              <td>
                <ul>
                  <li>LLM 의사결정 엔진 구현</li>
                  <li>지능형 경로 탐색 로직</li>
                  <li>무한 루프 방지 및 깊이 제한</li>
                </ul>
              </td>
              <td><strong>8 - 10 주</strong></td>
            </tr>
            <tr>
              <td><strong>다중 파일 처리 엔진</strong></td>
              <td>
                <ul>
                  <li>PDF/Word/Excel/PPT 파일 추출</li>
                  <li>노이즈 제거 및 품질 검증</li>
                  <li>파일 형식별 최적화</li>
                </ul>
              </td>
              <td><strong>5 - 7 주</strong></td>
            </tr>
            <tr>
              <td><strong>데이터 파이프라인</strong></td>
              <td>
                <ul>
                  <li>메시지 큐 설정 및 연동 (기존과 동일)</li>
                  <li>다중 파일 형식 메타데이터 스키마</li>
                  <li>Dead Letter Queue 등 오류 처리</li>
                </ul>
              </td>
              <td><strong>3 - 4 주</strong></td>
            </tr>
            <tr>
              <td><strong>.NET 백엔드</strong></td>
              <td>
                <ul>
                  <li>메시지 큐 Consumer 로직 (기존과 동일)</li>
                  <li>LLM Gateway 연동 및 프롬프트 관리</li>
                  <li>임베딩 및 Vector DB/RDB 저장</li>
                </ul>
              </td>
              <td><strong>5 - 7 주</strong></td>
            </tr>
            <tr>
              <td><strong>통합 및 테스트</strong></td>
              <td>
                <ul>
                  <li>40개 사이트 E2E 테스트</li>
                  <li>성능 최적화 및 비용 조절</li>
                  <li>모니터링 환경 구축</li>
                </ul>
              </td>
              <td><strong>5 - 7 주</strong></td>
            </tr>
          </tbody>
        </table>
      </section>

      <section id="cost-risk">
        <h2>7. 예상 비용 및 리스크 분석</h2>
        <h3>7.1. 예상 월별 클라우드 비용 (LLM 가이드 크롤링 적용)</h3>
        <table>
          <thead>
            <tr>
              <th>Azure 서비스</th>
              <th>역할</th>
              <th>예상 월별 비용 (USD)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Azure Container Apps</strong></td>
              <td>LLM 가이드 크롤러 & 백엔드 실행</td>
              <td>$80 - $200</td>
            </tr>
            <tr>
              <td><strong>Azure Service Bus</strong></td>
              <td>메시지 큐</td>
              <td>$15 - $40 (다중 파일 처리)</td>
            </tr>
            <tr>
              <td><strong>Azure OpenAI Service</strong></td>
              <td>LLM 경로 안내 + 데이터 구조화</td>
              <td>$150 - $400 (최적화된 호출)</td>
            </tr>
            <tr>
              <td><strong>Azure AI Search</strong></td>
              <td>Vector DB</td>
              <td>$60 - $120 (확장된 데이터)</td>
            </tr>
            <tr>
              <td><strong>Azure SQL Database</strong></td>
              <td>메타데이터 저장소</td>
              <td>$20 - $40 (확장된 스키마)</td>
            </tr>
            <tr>
              <td colspan="2"><strong>총 예상 비용 (월)</strong></td>
              <td><strong>$325 - $800</strong></td>
            </tr>
          </tbody>
        </table>

        <h3>7.2. 주요 리스크 및 완화 방안</h3>
        <table>
          <thead>
            <tr>
              <th>리스크 유형</th>
              <th>상세 내용</th>
              <th>완화 방안</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>기술적 리스크</strong></td>
              <td>
                <ul>
                  <li>LLM 경로 판단 오류</li>
                  <li>다중 파일 형식 처리 실패</li>
                  <li>목적지 도달 실패</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>프롬프트 엔지니어링 및 테스트 케이스 확대</li>
                  <li>파일 형식별 예외 처리 강화</li>
                  <li>fallback 메커니즘 및 수동 검증 도구</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><strong>비용 리스크</strong></td>
              <td>
                <ul>
                  <li>LLM API 호출 비용 급증</li>
                  <li>다중 파일 처리로 인한 리소스 증가</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>배치 처리 및 캐싱으로 API 호출 최적화</li>
                  <li>파일 크기 제한 및 우선순위 기반 처리</li>
                  <li>실시간 비용 모니터링 및 알림</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><strong>운영 리스크</strong></td>
              <td>
                <ul>
                  <li>40개 사이트 동시 관리 복잡성</li>
                  <li>사이트별 다른 구조 대응</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>사이트별 설정 관리 도구 개발</li>
                  <li>성공률 모니터링 및 자동 알림</li>
                  <li>점진적 확장 및 검증</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>
  </body>
</html>
